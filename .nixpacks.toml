[phases.setup]
nixPkgs = [
    "postgresql",
    "pkg-config", 
    "openssl"
]

[phases.build]
cmds = [
    "cd backend",
    "cargo build --release --target x86_64-unknown-linux-gnu --bin keylock-backend"
]

[start]
cmd = "cd backend && ./target/x86_64-unknown-linux-gnu/release/keylock-backend"

[variables]
CARGO_BUILD_TARGET = "x86_64-unknown-linux-gnu"
RUST_LOG = "info"
